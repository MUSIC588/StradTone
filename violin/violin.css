/* 此處保留原有所有設置，僅針對需求進行修改或新增 */
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, "Microsoft JhengHei", sans-serif;
  background: #222629;
  color: #f5f5f5;
}

/* 需求 11: username 驗證後暗底色，防止藍底選取 */
#nickname-input:disabled {
  background: #d1d1d1 !important; /* 淺一階的白/灰底 */
  color: #555 !important;
  user-select: none; 
  -webkit-user-select: none;
}

/* 需求 9: YouTube 按鈕顏色優化 */
#btn-media-youtube {
  background: #d42211; /* 紅色加入一點黃/橘元素 */
  border-color: #ff5050;
  color: #ffffff;
  font-weight: 800; /* 字體再粗一點 */
}
#btn-media-youtube.active {
  background: #ff0000;
  border-color: #ffcc00; /* 選中時邊框帶金黃 */
  color: #ffffff;
}
/* 當選中另外兩顆時，YouTube 變回黑灰底 */
.media-select-btn.inactive-yt {
  background: #3a3f44 !important;
  color: #f5f5f5 !important;
  border-color: #777 !important;
  font-weight: normal !important;
}

/* 需求 6: 編輯時媒體按鈕字樣淺一階 */
.media-select-btn.edit-mode-dim {
  color: #777 !important;
  opacity: 0.5;
}

/* 需求 5: 錄音暫停鍵變紅，取消閃爍 */
.media-record-btn#audio-rec-pause.paused-red {
  color: #ff0000 !important;
  border-color: #ff0000 !important;
}
.media-record-btn.recording-no-blink {
  color: #ff4b4b;
  border-color: #ff8080;
  background: #4a3a3a;
  animation: none !important; /* 不閃爍 */
}

/* 需求 7: 處理中禁止回覆區輸入 */
.is-processing textarea, 
.is-processing input, 
.is-processing .reply-target-btn {
  pointer-events: none !important;
  caret-color: transparent !important; /* 隱藏閃爍直線 */
  opacity: 0.7;
}

/* 以下為原有 CSS 結構，保持不變 */
.page { min-height: 100vh; padding: 12px; max-width: 1100px; margin: 0 auto; }
header { margin-bottom: 10px; display: flex; justify-content: space-between; align-items: baseline; gap: 8px; flex-wrap: wrap; }
header h1 { font-size: 20px; margin: 0; }
header h2 { font-size: 14px; margin: 0; opacity: 0.8; }
main.layout { display: flex; gap: 12px; align-items: stretch; }
.panel { background: #2d3236; border-radius: 8px; padding: 10px; box-shadow: 0 0 8px rgba(0, 0, 0, 0.35); min-height: 220px; }
.panel-left  { flex: 0 0 40%; max-width: 40%; display: flex; flex-direction: column; }
.panel-right { flex: 0 0 60%; max-width: 60%; display: flex; flex-direction: column; }
.hint, .reply-note { font-size: 12px; line-height: 1.4; color: #222629; }
.hidden { display: none !important; }
input::placeholder, textarea::placeholder { color: #999; opacity: 0.7; }

.toolbar { display: flex; gap: 6px; margin-bottom: 6px; flex-wrap: wrap; }
.toolbar button { padding: 4px 10px; border-radius: 14px; border: 1px solid #777; background: #3a3f44; color: #f5f5f5; font-size: 12px; cursor: pointer; }
form#community-form { display: flex; flex-direction: column; gap: 6px; margin-bottom: 8px; padding: 6px 8px; border-radius: 6px; border: 1px solid #d1a343; background: #141b20; box-shadow: 0 0 10px rgba(0,0,0,0.65); }
form#community-form label { font-size: 13px; display: block; }
form#community-form input[type="text"] { width: 100%; padding: 4px 6px; margin-top: 2px; border-radius: 4px; border: 1px solid #555; background: #1f2326; color: #f5f5f5; font-size: 13px; }
form#community-form input[type="text"]:not(:disabled) { background: #ffffff; color: #111; }
.form-row-inline { display: flex; flex-wrap: wrap; gap: 6px; align-items: center; }
#submit-btn { padding: 4px 14px; border-radius: 16px; border: none; background: #d1a343; color: #1d1d1d; font-size: 13px; cursor: pointer; }
.media-select-row { margin: 4px 0 2px; gap: 6px; }
.media-select-btn { padding: 3px 10px; border-radius: 14px; border: 1px solid #777; background: #3a3f44; color: #f5f5f5; font-size: 12px; cursor: pointer; opacity: 0.9; }
.media-select-btn.active { border-color: #d1a343; background: #e0b85f; color: #1d1d1d; font-weight: 600; }

.media-record-toolbar { display: flex; align-items: center; gap: 6px; margin-top: 4px; font-size: 11px; }
.media-record-btn { width: 26px; height: 26px; border-radius: 50%; border: 1px solid #777; background: #3a3f44; color: #f5f5f5; font-size: 14px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.15s ease; }
.media-record-btn[disabled] { opacity: 0.4; cursor: default; }
.media-record-btn.recording { color: #ff4b4b; border-color: #ff8080; background: #4a3a3a; animation: recordBlink 0.8s ease-in-out infinite; }
@keyframes recordBlink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }

.comments-wrapper { flex: 1 1 auto; overflow-y: auto; overflow-x: hidden; border-radius: 6px; border: 1px solid #444; background: #202427; }
table#comments-table { width: 100%; border-collapse: collapse; font-size: 12px; table-layout: fixed; }
table#comments-table thead { position: sticky; top: 0; background: #33383c; z-index: 1; }
table#comments-table th, table#comments-table td { border-bottom: 1px solid #333; padding: 4px 6px; text-align: left; vertical-align: top; word-wrap: break-word; word-break: break-word; }
#comments-tbody tr.selected { background: #4f7a3b !important; }

.visual-wrapper { display: flex; flex-direction: column; gap: 8px; height: 100%; }
.visual-body { flex: 1 1 auto; display: flex; flex-direction: column; gap: 8px; min-height: 260px; }
.top-row { display: flex; gap: 8px; min-height: 170px; }
.video-frame-wrap { flex: 1 1 60%; background: #111315; border-radius: 6px; overflow: hidden; border: 1px solid #555; position: relative; min-height: 150px; }
.video-frame-wrap iframe { width: 100%; height: 100%; border: none; }
#audio-player { position: absolute; left: 0; right: 0; bottom: 0; width: 100%; background: #111315; display: none; }

.circle-area { flex: 1 1 40%; display: flex; justify-content: center; align-items: center; }
.circle-stack { position: relative; width: 160px; height: 160px; border-radius: 50%; --ring-main-color: #5c7a5c; --ring-boundary-color: #9ad09a; --ring-highlight-color: #70ff70; background: radial-gradient(circle at 20% 20%, #555, #111); }
.ring { position: absolute; border-radius: 50%; transition: all 0.12s ease; }
.ring-main { border: 3px solid var(--ring-main-color); opacity: 0.8; }
.ring-boundary { border: 1.2px solid var(--ring-boundary-color); opacity: 0.7; }
.ring.active { border-color: var(--ring-highlight-color); opacity: 1; box-shadow: 0 0 10px rgba(140, 255, 140, 0.9); }

.bottom-row { display: flex; gap: 8px; align-items: stretch; }
.reply-area { flex: 1 1 60%; }
.reply-target-btn { padding: 3px 10px; border-radius: 14px; border: 1px solid #bbb; background: #f5f5f5; color: #222629; font-size: 12px; cursor: pointer; }
.reply-target-btn.linked { background: #4f7a3b; border-color: #4f7a3b; color: #f5f5f5; }
#admin-reply { width: 100%; background: #1f2326; border: 1px solid #555; color: #f5f5f5; font-size: 12px; border-radius: 4px; min-height: 80px; resize: none; overflow: hidden; line-height: 1.4; }

.fingerboard-row { flex: 1 1 40%; display: flex; justify-content: center; align-items: center; }
.fingerboard { position: relative; width: 120px; max-width: 140px; height: 260px; background: linear-gradient(180deg, #181a1d, #34383d); border-radius: 14px; overflow: hidden; border: 2px solid #676f78; }

@media (max-width: 820px) {
  .page { padding: 0; max-width: 100%; }
  main.layout { flex-direction: column; }
  #visual-panel { order: 1; }
  #comments-section { order: 2; }
  .panel-left, .panel-right { max-width: 100%; width: 100%; border-radius: 0; }
  .video-frame-wrap { height: 160px !important; min-height: 160px; }
  .bottom-row { flex-direction: row; }
}

